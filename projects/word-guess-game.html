<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS reset -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous">

    <title>Who's that Pokemon</title>
</head>

<body>
    <div id="game">
        <p id="gameNotification"> Press a letter key to guess a Pokemon name! Non-letter keys and spaces are ignored.
        </p>

        <p id="scoreText">Wins : 0
        </p>

        <p id="revealedLettersText">
        </p>

        <p id="remainingGuessesText">Remaining chances: 5
        </p>

        <p id="guessedLettersText">Guessed Letters
        </p>
    </div>

    <!-- Optional JavaScript -->
    <script type="text/javascript">

        var gameResetFlag = true;
        var pokemonNames = ["bulbasaur","ivysaur","venusaur", "charmander", "charmeleon", "charizard", "squirtle", "wartortle", "blastoise"];
        var alphabet = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h',
            'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's',
            't', 'u', 'v', 'w', 'x', 'y', 'z'];
        var currentWord;
        var revealedLetters = [];
        var remainingGuesses = 0;
        var guessedLetters = [];
        var score = 0;
        document.getElementById("scoreText").innerHTML = "Wins: " + score;


        // This function is run whenever the user presses a key.
        document.onkeyup = function (event) {

            // check if game needs to be reset or started
            if (gameResetFlag) {
                // get random word from pokemonNames and set to currentWord
                currentWord = pokemonNames[Math.floor(Math.random() * pokemonNames.length)];

                // set revealedLetters to array of "_" matching length of currentWord and display it
                revealedLetters = new Array(currentWord.length).fill("_ ");

                document.getElementById("revealedLettersText").innerHTML = revealedLetters.join('');

                // reset remainingGuesses to 
                remainingGuesses = 5;
                document.getElementById("remainingGuessesText").innerHTML = "Remaining Chances: " + remainingGuesses;

                // reset guessedLetters to []
                guessedLetters = [];
                document.getElementById("guessedLettersText").innerHTML = "Guessed Letters: " + guessedLetters;

                // set gameResetFlag to false;
                gameResetFlag = false;
            }

            // Determines which key was pressed.
            var userGuess = event.key;
            if (!alphabet.includes(userGuess)) {
                return;
            }

            // Check if guessed letter has been used by going through guessedLetters array.
            if (!(guessedLetters.includes(userGuess))) {
                    guessedLetters.push(userGuess);
                    document.getElementById("guessedLettersText").innerHTML = "Guessed Letters: " + guessedLetters;
            } else {
                return;
            }

            // Check if guessed letter is part of word by checking each character in currentWord.
            for (i = 0; i < currentWord.length; i++) {
                if (userGuess == currentWord[i]) {
                    revealedLetters[i] = userGuess;
                    document.getElementById("revealedLettersText").innerHTML = revealedLetters.join('');
                }
            }

            // Check if userGuess is not in the word
            if(!(currentWord.includes(userGuess))) {
                remainingGuesses--;
                document.getElementById("remainingGuessesText").innerHTML = "Remaining Chances: " + remainingGuesses;
            }

            // check if remainingGuesses is 0 and reset the game
            if (remainingGuesses == 0) {
                    gameResetFlag = true;
                    return;
            }

            // Check if word is complete by comparing currentWord to revealedLetters.
            if (revealedLetters.join('') == currentWord) {
                score++;
                document.getElementById("scoreText").innerHTML = "Wins: " + score;
                gameResetFlag = true;
            }
        }

    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
</body>

</html>